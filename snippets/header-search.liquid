{% comment %}
  Renders header search component
  
  Accepts:
  - input_id: {String} Id to assign to the search input (optional)
{% endcomment %}

{%- assign input_id = input_id | default: 'Search-In-Menu' -%}

<div class="shopify-search">
  <details-modal class="header__search">
    <details>
      <summary class="header__icon header__icon--search header__icon--summary link focus-inset" aria-haspopup="dialog" aria-label="{{ 'general.search.search' | t }}">
        <span>
          <svg class="modal__toggle-open icon icon-search" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 19" fill="none">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.03 11.68A5.784 5.784 0 112.85 3.5a5.784 5.784 0 018.18 8.18zm.26 1.12a6.78 6.78 0 11.72-1.3l5.4 5.4a.5.5 0 11-.7.7l-5.4-5.4.02-.02a6.86 6.86 0 01-1.02.62z" fill="currentColor"/>
          </svg>
          <svg class="modal__toggle-close icon icon-close" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 17" fill="none">
            <path d="M.865 15.978a.5.5 0 00.707.707l7.433-7.431 7.579 7.282a.501.501 0 00.846-.37.5.5 0 00-.153-.374L9.712 8.546l7.417-7.416a.5.5 0 10-.707-.708L8.991 7.853 1.413.573a.5.5 0 10-.693.72l7.563 7.268-7.418 7.417z" fill="currentColor"/>
          </svg>
        </span>
      </summary>
      <div class="search-modal modal__content" role="dialog" aria-modal="true" aria-label="{{ 'general.search.search' | t }}">
        <div class="modal-overlay"></div>
        <div class="search-modal__content" tabindex="-1">
          <predictive-search class="search-modal__form" data-loading-text="{{ 'accessibility.loading' | t }}">
            <form action="{{ routes.search_url }}" method="get" role="search" class="search search-modal__form">
              <div class="field">
                <input class="search__input field__input" id="{{ input_id }}" type="search" name="q" value="{{ search.terms | escape }}" placeholder="{{ 'general.search.search' | t }}" aria-label="{{ 'general.search.search' | t }}">
                <label class="field__label" for="{{ input_id }}">{{ 'general.search.search' | t }}</label>
                <button class="search__button field__button focus-inset" aria-label="{{ 'general.search.search' | t }}">
                  <svg class="icon icon-search" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 19" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.03 11.68A5.784 5.784 0 112.85 3.5a5.784 5.784 0 018.18 8.18zm.26 1.12a6.78 6.78 0 11.72-1.3l5.4 5.4a.5.5 0 11-.7.7l-5.4-5.4.02-.02a6.86 6.86 0 01-1.02.62z" fill="currentColor"/>
                  </svg>
                </button>
              </div>
            </form>
          </predictive-search>
          <button type="button" class="search-modal__close-button modal__close-button link" aria-label="{{ 'accessibility.close' | t }}">
            <svg class="icon icon-close" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 17" fill="none">
              <path d="M.865 15.978a.5.5 0 00.707.707l7.433-7.431 7.579 7.282a.501.501 0 00.846-.37.5.5 0 00-.153-.374L9.712 8.546l7.417-7.416a.5.5 0 10-.707-.708L8.991 7.853 1.413.573a.5.5 0 10-.693.72l7.563 7.268-7.418 7.417z" fill="currentColor"/>
            </svg>
          </button>
        </div>
      </div>
    </details>
  </details-modal>
</div>